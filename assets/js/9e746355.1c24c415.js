"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[495],{3152:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});var i=t(4848),r=t(8453);const l={sidebar_position:3},a="Query Data",s={id:"query_data",title:"Query Data",description:"Query is a composition of four basic building blocks:",source:"@site/docs/query_data.md",sourceDirName:".",slug:"/query_data",permalink:"/full-metal-weaviate/docs/query_data",draft:!1,unlisted:!1,editUrl:"https://github.com/thedeepengine/full-metal-weaviate/docs/query_data.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Quickstart",permalink:"/full-metal-weaviate/docs/quickstart"},next:{title:"Load data",permalink:"/full-metal-weaviate/docs/load_data"}},o={},c=[{value:"Simple attribute filtering",id:"simple-attribute-filtering",level:2},{value:"Logical filtering",id:"logical-filtering",level:2},{value:"Reference filtering",id:"reference-filtering",level:2},{value:"Deep Reference filtering",id:"deep-reference-filtering",level:2},{value:"Example",id:"example",level:2},{value:"Complex return field examples",id:"complex-return-field-examples",level:2}];function d(e){const n={admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"query-data",children:"Query Data"})}),"\n",(0,i.jsxs)(n.admonition,{title:"TL;DR",type:"info",children:[(0,i.jsx)(n.p,{children:"Query is a composition of four basic building blocks:"}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"attribute:"})," name=value_name",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"logical:"})," name=value_name&age=value_age|desc=desc_value",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"refs:"})," hasChildren.name=name_value",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"refs deeply nested:"})," hasChildren.hasProperty.name=name_value"]}),(0,i.jsx)(n.p,{children:"With this set of four rules, more complex queries can be built"})]}),"\n",(0,i.jsx)(n.p,{children:"To query data, first get the metal collection:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import weaviate\nfrom full_metal_weaviate import get_metal_client\n\nmetal_client = get_metal_client('<your_weaviate_client>')\nTechnology=metal_client.get_metal_collection('Technology')\n#collection_name = metal_client.get_metal_collection('<your_collection_name>')\n"})}),"\n",(0,i.jsx)(n.h2,{id:"simple-attribute-filtering",children:"Simple attribute filtering"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"response = Technology.metal_query('name=weaviate')\n"})}),"\n",(0,i.jsx)(n.h2,{id:"logical-filtering",children:"Logical filtering"}),"\n",(0,i.jsx)(n.p,{children:"This is your common & and | operations."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"response = Technology.metal_query('name=weaviate|name=pinecone')\n"})}),"\n",(0,i.jsx)(n.h2,{id:"reference-filtering",children:"Reference filtering"}),"\n",(0,i.jsx)(n.p,{children:"This is where you want to filter on a reference field."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"response = Technology.metal_query('hasProperty.name=HNSW')\n"})}),"\n",(0,i.jsx)(n.p,{children:"Any other query is built out of these three basic blocks given some eventual extentions, like in deep reference filtering."}),"\n",(0,i.jsx)(n.h2,{id:"deep-reference-filtering",children:"Deep Reference filtering"}),"\n",(0,i.jsxs)(n.p,{children:["Deeply nested references can be accessed using ",(0,i.jsx)(n.code,{children:"."})," notation. Nesting can happen at any depth."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"response = Technology.metal_query('hasProperty.hasCategory.name=efficiency')\n"})}),"\n",(0,i.jsx)(n.h1,{id:"return-fields",children:"Return fields"}),"\n",(0,i.jsxs)(n.admonition,{title:"TL;DR",type:"info",children:[(0,i.jsx)(n.p,{children:"Return fields is a composition of four basic building blocks:"}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"attribute:"})," name,desc,title",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"references:"})," hasProperty.hasChildren",":name",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"deeply nested references w/o previous level attribute:"})," hasProperty.hasChildren",":name",",desc",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"deeply nested references with previous level attribute:"})," hasProperty",":name",",title>(hasChildren",":name",",desc)"]})]}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"response = Technology.metal_query('name=Weaviate',\nreturn_fields='name,github,nb_stars,hasProperty:name,description')\n"})}),"\n",(0,i.jsx)(n.h2,{id:"complex-return-field-examples",children:"Complex return field examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"('complex nesting with priority parenthesis',\n'hasChildren:name>(hasAttrUuid:name,hasChildren:name>(hasAttrUuid:name,hasChildren:name))'),\n\n('complex nesting, syntax mix',\n'hasChildren:name>(hasAttrUuid.hasChildren:name,hasChildren:name)')\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var i=t(6540);const r={},l=i.createContext(r);function a(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);